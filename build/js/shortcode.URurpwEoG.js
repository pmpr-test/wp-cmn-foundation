/*! For license information please see shortcode.URurpwEoG.js.LICENSE.txt */
!function(){const t=PRHelper.getType(),e=PRHelper.getHTML(),r=PRHelper.getHook();window.PRShortcodeManager={activeNode:null,activeModal:null,setActiveNode(t,o){this.activeNode=t,this.activeModal=o,e.setElementActivity(e.getElement(".pr-tabs",this.activeModal),!1),r.addAction(`form_generator_${e.getAttribute(o,"id")}_before_close`,(()=>{this.clearActiveNode()}),10)},getActiveNode(){return this.activeNode},getActiveModal(){return this.activeModal},clearActiveNode(){o.reset(),e.setElementActivity(e.getElement(".pr-tabs",this.activeModal),!0),this.activeNode=null,this.activeModal=null}};const o={getString:(t,r)=>{const n=o.getAttributes(r),i=e.getData(t,"slug");return o.getConstruct(`${i}_${r}`,n)},getPlaceholder:(t,e)=>`<span class="pr-shortcode-tag" data-shortcode="${t}">${e}</span>`,getCurrentName:()=>{const t=e.getElement(".pr-segment-nav-item.pr-tab-link.is-active");return!!e.isElement(t)&&e.getData(t,"name")},getConstruct:(e,n)=>{let i=`[${e}`;return t.each(n,((n,c)=>{t.isEmpty(n)||("Object"===(n=r.applyFilters(e+"_before_construct_"+c+"_value",n)).constructor.name?i+=" "+c+"="+o.getConstructOfObject(n):i+=" "+c+'="'+n+'"')})),i=i.trim(),i+="]",r.applyFilters("",i,e)},getConstructOfObject:(e,r=1)=>{let n="";return 1===r&&(n+='"'),t.each(e,((t,e)=>{"Object"===t.constructor.name?n+="("+o.getConstructOfObject(t,r+1)+"),":n+=(t=e+"='"+t+"'").replace(/,/g,"|")+","})),n=n.replace(/,\s*$/,""),n=n.trim(),1===r&&(n+='"'),n},insert:(t,n)=>{window.wpActiveEditor="content";const i=window.PRShortcodeManager.getActiveNode(),c=o.getString(n,t);i?(i.innerText=c,window.PRShortcodeManager.clearActiveNode()):window.send_to_editor(o.getPlaceholder(t,c));const s=e.getParent(n,".pr-modal-frame");if(e.isElement(s)){const t=e.getElement(".pr-modal-close-button",s);r.simulateClick(t)}},reset:(e="")=>{t.isEmpty(e)&&(e=o.getCurrentName());const r=o.getInputs(e);t.isEmpty(r)||t.each(r,(t=>{PRBackendHelper.getForm().clearField(t)}))},getInputs:t=>e.getElements("input:not([type=button]), select, textarea",`#pr-segment-${t}`),getAttributes:n=>{const i={},c=o.getInputs(n);return t.each(c,(t=>{const r=e.getAttribute(t,"id");if(r){const o=e.getParent(t,".pr-field");let n=PRHelper.getForm().getFieldValue(o);"string"==typeof n&&(n=encodeURIComponent(n)),i[r]=n}})),r.applyFilters("shortcode_attributes",i)}};r.on("click",((e,n)=>{e.preventDefault();const i=o.getCurrentName();if(i){r.doAction("before_insert_shortcode",i);const e=tinyMCE.activeEditor;t.isEmpty(e)||e.fire("before_insert_shortcode",{shortcode:i}),o.insert(i,n),o.reset(i),t.isEmpty(e)||e.fire("after_insert_shortcode",{shortcode:i}),r.doAction("after_insert_shortcode",i)}}),"button#insert-shortcode")}();